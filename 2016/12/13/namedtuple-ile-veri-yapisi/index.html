<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>namedtuple ile veri yapısı &mdash; Python Püf Noktaları</title>
    <meta name="title" content="namedtuple ile veri yapısı &mdash; Python Püf Noktaları">
    <link rel="canonical" href="http://python.gelistiriciyiz.biz/2016/12/13/namedtuple-ile-veri-yapisi/index.html">
    <meta property="og:title" content="namedtuple ile veri yapısı &mdash; Python Püf Noktaları"/>
    <meta property="og:url" content="http://python.gelistiriciyiz.biz/2016/12/13/namedtuple-ile-veri-yapisi/index.html"/>
    <meta property="og:image" content="http://python.gelistiriciyiz.biz/public/images/cover.jpg"/>
    <meta property="og:description" content="Basit veri yapılarına ihtiyacınız olduğunda kullanabileceğiniz bir fonksiyondanbahsetmek istiyorum."/>
    <meta name="description" content="Basit veri yapılarına ihtiyacınız olduğunda kullanabileceğiniz bir fonksiyondanbahsetmek istiyorum."/>
    <meta property="og:site_name" content="Python Püf Noktaları">
    <link rel="shortcut icon" href="/public/images/favicon.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/public/images/logo.png"/>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="http://python.gelistiriciyiz.biz/feed.xml" />
    <link href="//fonts.googleapis.com/css?family=Roboto:400,700,300,900&subset=latin,latin-ext" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">

    
    <link href="/public/css/application.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <section class="site-nav">
        <header>
            <nav id="navigation">
                <a class="brand" href="/"><img alt="Logo" src="/public/images/logo.png" /></a>
                <a href="/" class="home">Anasayfa</a>
                <a href="http://python.gelistiriciyiz.biz/">python.gelistiriciyiz.biz</a>
                <a href="/hakkinda/">Hakkında</a>
                <a href="/arsiv/">Arşiv</a>
            </nav>

            <nav class="tagline hidden-xs">
<a href="http://gelistiriciyiz.biz/" class="btn btn-outline">Geliştiriciyiz.biz</a>            </nav>
        </header>
    </section>

        

    <article>
        <div class="container">
            <header>
                <div class="meta">
                    <address><a rel="author" href="http://ugur.ozyilmazel.com" title="Uğur Özyılmazel" target="_blank">Uğur Özyılmazel</a></address> &mdash;
                    <time pubdate datetime="2016-12-13T10:22:00+03:00" title="13 Aralık 2016, Salı 10:22">13 Aralık 2016, Salı 10:22</time>
                </div>
                <h1 class="title">namedtuple ile veri yapısı</h1>
                <h2 class="subtitle">Yüksek performanslı veri taşıyıcılar</h2>
                    <div class="tags">
                        <span class="badge"><a href="/etiket/py2-6/">py2.6+</a></span>
                        <span class="badge"><a href="/etiket/collections/">collections</a></span>
                    </div>
                
            </header>
            
            <section id="article-detail">
                <p>Basit veri yapılarına ihtiyacınız olduğunda kullanabileceğiniz bir fonksiyondan
bahsetmek istiyorum.</p>

<p><code>namedtuple</code> Python 2.6’dan itibaren, <code>collections</code> modulünün içinde bulunan bir
fonksiyon:</p>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>

<span class="n">User</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">'MyCustomUserStruct'</span><span class="p">,</span> <span class="p">[</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">])</span>

<span class="n">user_1</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="s">u"Uğur"</span><span class="p">,</span> <span class="s">u"Özyılmazel"</span><span class="p">)</span>
<span class="n">user_1</span><span class="o">.</span><span class="n">__doc__</span>    <span class="c"># MyCustomUserStruct(first_name, last_name)</span>
<span class="n">user_1</span><span class="o">.</span><span class="n">first_name</span> <span class="c"># Uğur</span>
<span class="n">user_1</span><span class="o">.</span><span class="n">last_name</span>  <span class="c"># Özyılmazel</span>

<span class="c"># user_1’e ait public method’lar:</span>
<span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">user_1</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">"_"</span><span class="p">)]</span>
<span class="c"># ['count', 'first_name', 'index', 'last_name']</span>
</code></pre>

<p>Aslında perde arkasında ne olduğunu görmek için <code>verbose</code> durumunda üretelim
nesneyi:</p>
<pre class="highlight python"><code><span class="n">User</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">'MyCustomUserStruct'</span><span class="p">,</span> <span class="p">[</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">],</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyCustomUserStruct</span><span class="p">(</span><span class="nb">tuple</span><span class="p">):</span>
    <span class="s">'MyCustomUserStruct(first_name, last_name)'</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">()</span>

    <span class="n">_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">):</span>
        <span class="s">'Create new instance of MyCustomUserStruct(first_name, last_name)'</span>
        <span class="k">return</span> <span class="n">_tuple</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_make</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="nb">tuple</span><span class="o">.</span><span class="n">__new__</span><span class="p">,</span> <span class="nb">len</span><span class="o">=</span><span class="nb">len</span><span class="p">):</span>
        <span class="s">'Make a new MyCustomUserStruct object from a sequence or iterable'</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">new</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">iterable</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">TypeError</span><span class="p">(</span><span class="s">'Expected 2 arguments, got </span><span class="si">%</span><span class="s">d'</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">'Return a nicely formatted representation string'</span>
        <span class="k">return</span> <span class="s">'MyCustomUserStruct(first_name=</span><span class="si">%</span><span class="s">r, last_name=</span><span class="si">%</span><span class="s">r)'</span> <span class="o">%</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">_asdict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">'Return a new OrderedDict which maps field names to their values'</span>
        <span class="k">return</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fields</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_replace</span><span class="p">(</span><span class="n">_self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="s">'Return a new MyCustomUserStruct object replacing specified fields with new values'</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">_self</span><span class="o">.</span><span class="n">_make</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">kwds</span><span class="o">.</span><span class="n">pop</span><span class="p">,</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">),</span> <span class="n">_self</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">kwds</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">'Got unexpected field names: </span><span class="si">%</span><span class="s">r'</span> <span class="o">%</span> <span class="n">kwds</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">__getnewargs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">'Return self as a plain tuple.  Used by copy and pickle.'</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="n">__dict__</span> <span class="o">=</span> <span class="n">_property</span><span class="p">(</span><span class="n">_asdict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">'Exclude the OrderedDict from pickling'</span>
        <span class="k">pass</span>

    <span class="n">first_name</span> <span class="o">=</span> <span class="n">_property</span><span class="p">(</span><span class="n">_itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">doc</span><span class="o">=</span><span class="s">'Alias for field number 0'</span><span class="p">)</span>

    <span class="n">last_name</span> <span class="o">=</span> <span class="n">_property</span><span class="p">(</span><span class="n">_itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">doc</span><span class="o">=</span><span class="s">'Alias for field number 1'</span><span class="p">)</span>
</code></pre>

<p><code>namedtuple</code>’ı çağırırken geçtiğimiz ilk parametre ile aslında birazdan
üreteceğimiz <code>Class</code>’ın adını vermiş oluyoruz. İkinci parametre ile, bu
oluşacak sınıfın <code>property</code>’lerinin listesini vermiş oluyoruz.</p>
<pre class="highlight python"><code><span class="n">namedtuple</span><span class="p">(</span><span class="n">typename</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">rename</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre>

<p>Dikkat ettiyseniz bu oluşan sınıf, <code>tuple</code>’dan türedi:</p>
<pre class="highlight python"><code><span class="k">class</span> <span class="nc">MyCustomUserStruct</span><span class="p">(</span><span class="nb">tuple</span><span class="p">):</span>
</code></pre>

<p><code>count</code> ve <code>index</code> method’ları da direk olarak <code>tuple</code>’dan geldi:</p>
<pre class="highlight python"><code><span class="p">[</span><span class="n">m</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="nb">tuple</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">"_"</span><span class="p">)]</span> <span class="c"># ['count', 'index']</span>
</code></pre>

<p><code>user_1.first_name</code> ya da <code>user_1.last_name</code> aslında birer <strong>alias</strong> (<em>rumuz</em>).
Neticede elimizde bir <code>tuple</code> olduğu için index kullanarak da işlem yapabilirdik:</p>
<pre class="highlight python"><code><span class="n">user_1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># Uğur</span>
<span class="n">user_1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c"># Özyılmazel</span>
</code></pre>

<p>Nokta yazım şekli (<em>dot notation</em>) kodun okunabilirliği açısından çok rahatlatıcı.
Bu bakımdan kullanımı da çok kolay. Index ezberlemek yerine property adını
çağırıyorsunuz. Sınıfın method’larına bakarsanız:</p>
<pre class="highlight python"><code><span class="n">user_1</span><span class="o">.</span><span class="n">_fields</span>  <span class="c"># ('first_name', 'last_name')</span>
<span class="n">user_1</span><span class="o">.</span><span class="n">__dict__</span>
<span class="c"># OrderedDict([('first_name', u'U\u011fur'), </span>
<span class="c">#              ('last_name', u'\xd6zy\u0131lmazel')])</span>

<span class="n">user_1</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span>
<span class="c"># "MyCustomUserStruct(first_name=u'U\\u011fur', last_name=u'\\xd6zy\\u0131lmazel')"</span>

<span class="n">user_2</span> <span class="o">=</span> <span class="n">user_1</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span><span class="n">first_name</span><span class="o">=</span><span class="s">u"Vigo"</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="s">u"Kadriyani"</span><span class="p">)</span>
<span class="n">user_2</span><span class="o">.</span><span class="n">first_name</span> <span class="c"># u'Vigo'</span>
<span class="n">user_2</span><span class="o">.</span><span class="n">last_name</span>  <span class="c"># u'Kadriyani'</span>

<span class="c"># farklı yöntemler</span>
<span class="n">user_1</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">first_name</span><span class="o">=</span><span class="s">u"Uğur"</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="s">u"Özyılmazel"</span><span class="p">)</span>
<span class="c"># MyCustomUserStruct(first_name=u'U\u011fur', last_name=u'\xd6zy\u0131lmazel')</span>

<span class="n">user_2_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'first_name'</span><span class="p">:</span> <span class="s">u"Tony"</span><span class="p">,</span>
    <span class="s">'last_name'</span><span class="p">:</span> <span class="s">u"Hawk"</span><span class="p">,</span>
<span class="p">}</span>

<span class="c"># dict’den kwargs şeklinde</span>
<span class="n">user_2</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">user_2_data</span><span class="p">)</span>
<span class="c"># MyCustomUserStruct(first_name=u'Tony', last_name=u'Hawk')</span>
</code></pre>

<p><code>collections</code> modülü içinde başka güzel özellikler de bulunmakta. İleriki
yazılarda yeri geldikçe değinmeyi düşünüyorum.</p>

            </section>

            <footer>
                <address>
                    <img class="avatar" src="http://www.gravatar.com/avatar/033485f7e18823d4ccabb24e5cb4935f" />
                    <p>
                        <strong><a rel="author" href="http://ugur.ozyilmazel.com" title="{{ page.author_name }}" target="_blank">Uğur Özyılmazel</a></strong><br>
                        <span class="muted">Yazılım Geliştiricisi</span>
                    </p>
                </address>
            </footer>
            
            
            
            
            <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//pythongelistiriciyizbiz.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

        </div>
    </article>


    <footer class="site-footer">
        <div class="container">
            <nav>
                <a href="http://gelistiriciyiz.biz/">Geliştiriciyiz.biz</a> &middot;
                <a href="/">Anasayfa</a> &middot;
                <a href="/hakkinda/">Hakkında</a> &middot;
                <a href="/arsiv/">Arşiv</a>
            </nav>
        
            <nav class="social">
                <a href="https://twitter.com/python_tips_tr" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
                <a href="/feed.xml" title="RSS Feed"><i class="icon icon-rss black"></i></a>
            </nav>
        </div>
    </footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    
    <script src="/public/js/retina-0.0.2.js" type="text/javascript"></script>
    <script src="/public/js/app.js" type="text/javascript"></script>
    
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-6463685-41', 'auto');
          ga('send', 'pageview');
        </script>
        <script id="dsq-count-scr" src="//pythongelistiriciyizbiz.disqus.com/count.js" async></script>
</body>
</html>
